{{ customer$ | async | json }}
<div class="row">
  <div class="col-md-6 col-sm-8">
    <div *ngIf="customer$ | async as customer" class="card">
      <div class="card-header card-header-primary">
        <h4 class="card-title" *ngIf="customer$ | async">Edit customer</h4>
        <h4 class="card-title" *ngIf="!(customer$ | async)">
          Add New customer
        </h4>
      </div>

      <div class="card-body">
        <form #customerForm="ngForm">
          <h3 class="h4 text-primary font-weight-bold">
            ID:
            <span *ngIf="customer._id">{{ customer._id }}</span>
            <span *ngIf="!customer._id">auto-generated</span>
          </h3>
          <input type="hidden" name="id" [(ngModel)]="customer._id" required />

          <h3 class="h5 text-secondary">Vezetéknév *</h3>
          <div class="form-group">
            <input
              type="text"
              class="form-control"
              id="lastName"
              name="lastName"
              [(ngModel)]="customer['lastName']"
              #lastName="ngModel"
              required
              pattern="^[A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű]+( [A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű]+)*$"
            />
            <div
              *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)"
              class="alert"
            >
              <div *ngIf="lastName.errors?.['pattern']">
                Kérjük, csak magyar betüket tartalmazó szavakat írjon be! Szóköz
                csak a szavak között lehet!
              </div>
              <div *ngIf="lastName.errors?.['required']">
                Kérjük, töltse ki a mezőt!
              </div>
            </div>
          </div>

          <h3 class="h5 text-secondary">Keresztnév *</h3>
          <div class="form-group">
            <input
              type="text"
              class="form-control"
              id="firstName"
              name="firstName"
              [(ngModel)]="customer['firstName']"
              #firstName="ngModel"
              required
              pattern="^[A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű]+$"
            />
            <div
              *ngIf="
                firstName.invalid && (firstName.dirty || firstName.touched)
              "
              class="alert"
            >
              <div *ngIf="firstName.errors?.['pattern']">
                Kérjük, csak ékezet nélküli betűket írjon be! Szóköz csak a
                szavak között lehet!
              </div>
              <div *ngIf="firstName.errors?.['required']">
                Kérjük, töltse ki a mezőt!
              </div>
            </div>
          </div>

          <h3 class="h5 text-secondary">Email *</h3>
          <div class="form-group">
            <input
              type="text"
              class="form-control"
              id="email"
              name="email"
              [(ngModel)]="customer['email']"
              #email="ngModel"
              required
              pattern="^[\w\.]+@([\w-]+\.)+.[\w-]{2,6}$" required>
            />
            <div
              *ngIf="
                email.invalid && (email.dirty || email.touched)
              "
              class="alert"
            >
              <div *ngIf="email.errors?.['pattern']">
                Kérjük csak ékezet nélküli betűket írjon be.
              </div>
              <div *ngIf="email.errors?.['required']">
                Kérjük, töltse ki a mezőt!
              </div>
            </div>
          </div>

          <h3 class="h5 text-secondary">Telefon *</h3>
          <div class="form-group">
            <input
              type="string"
              class="form-control"
              id="phone"
              name="phone"
              [(ngModel)]="customer['phone']"
              #phone="ngModel"
              required
              pattern="^[0-9 \+]*$"
            />
            <div
              *ngIf="phone.invalid && (phone.dirty || phone.touched)"
              class="alert"
            >
              <div *ngIf="phone.errors?.['pattern']">
                Kérem adjon meg egy telefonszámot!
              </div>
              <div *ngIf="phone.errors?.['required']">
                A telefonszám megadása kötelező!
              </div>
            </div>
          </div>

          <h3 class="h5 text-secondary mt-2">Szállítási cím</h3>
          <div class="ms-3">
            <h6>Irányítószám</h6>
            <div class="form-group">
              <input
                type="text"
                class="form-control"
                id="zip"
                name="zip"
                [(ngModel)]="customer.addressBill.zip"
                #zip="ngModel"
                pattern="^[1-9][0-9]{1,3}$"
              />
              <div
                *ngIf="zip.invalid && (zip.dirty || zip.touched)"
                class="alert"
              >
                <div *ngIf="zip.errors?.['pattern']">
                  Kérjük, csak magyar betüket tartalmazó szavakat írjon be!
                  Szóköz csak a szavak között lehet!
                </div>
                <div *ngIf="zip.errors?.['required']">
                  Kérjük, töltse ki a mezőt!
                </div>
              </div>
            </div>

            <h6>Város</h6>
            <div class="form-group">
              <input
                type="text"
                class="form-control"
                id="city"
                name="city"
                [(ngModel)]="customer.addressBill.city"
                #city="ngModel"
                pattern="^[1-9A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű\-\.,]+( [0-9A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű\-\.,]+)*$"
              />
              <div
                *ngIf="city.invalid && (city.dirty || city.touched)"
                class="alert"
              >
                <div *ngIf="city.errors?.['pattern']">
                  Kérjük, csak magyar betüket tartalmazó szavakat írjon be!
                  Szóköz csak a szavak között lehet!
                </div>
                <div *ngIf="city.errors?.['required']">
                  Kérjük, töltse ki a mezőt!
                </div>
              </div>
            </div>

            <h6>Utca, házszám</h6>
            <div class="form-group">
              <input
                type="text"
                class="form-control"
                id="street"
                name="street"
                [(ngModel)]="customer.addressBill.street"
                #street="ngModel"
                pattern="^[1-9A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű\-\.,]+( [0-9A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű\-\.,]+)*$"
              />
              <div
                *ngIf="street.invalid && (street.dirty || street.touched)"
                class="alert"
              >
                <div *ngIf="street.errors?.['pattern']">
                  Kérjük, csak magyar betüket tartalmazó szavakat írjon be!
                  Szóköz csak a szavak között lehet!
                </div>
                <div *ngIf="street.errors?.['required']">
                  Kérjük, töltse ki a mezőt!
                </div>
              </div>
            </div>
          </div>

          <h3 class="h5 text-secondary mt-2">Számla cím</h3>
          <div class="ms-3">
            <h6>Irányítószám</h6>
            <div class="form-group">
              <input
                type="text"
                class="form-control"
                id="zip"
                name="zip"
                [(ngModel)]="customer.addressShip.zip"
                #zip="ngModel"
                pattern="^[1-9][0-9]{1,3}$"
              />
              <div
                *ngIf="zip.invalid && (zip.dirty || zip.touched)"
                class="alert"
              >
                <div *ngIf="zip.errors?.['pattern']">
                  Kérjük, csak magyar betüket tartalmazó szavakat írjon be!
                  Szóköz csak a szavak között lehet!
                </div>
                <div *ngIf="zip.errors?.['required']">
                  Kérjük, töltse ki a mezőt!
                </div>
              </div>
            </div>

            <h6>Város</h6>
            <div class="form-group">
              <input
                type="text"
                class="form-control"
                id="city"
                name="city"
                [(ngModel)]="customer.addressShip.city"
                #city="ngModel"
                pattern="^[1-9A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű\-\.,]+( [0-9A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű\-\.,]+)*$"
              />
              <div
                *ngIf="city.invalid && (city.dirty || city.touched)"
                class="alert"
              >
                <div *ngIf="city.errors?.['pattern']">
                  Kérjük, csak magyar betüket tartalmazó szavakat írjon be!
                  Szóköz csak a szavak között lehet!
                </div>
                <div *ngIf="city.errors?.['required']">
                  Kérjük, töltse ki a mezőt!
                </div>
              </div>
            </div>

            <h6>Utca, házszám</h6>
            <div class="form-group">
              <input
                type="text"
                class="form-control"
                id="street"
                name="street"
                [(ngModel)]="customer.addressShip.street"
                #street="ngModel"
                pattern="^[1-9A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű\-\.,]+( [0-9A-Za-zÁÉÍÓÖŐÚÜŰáéíóöőúüű\-\.,]+)*$"
              />
              <div
                *ngIf="street.invalid && (street.dirty || street.touched)"
                class="alert"
              >
                <div *ngIf="street.errors?.['pattern']">
                  Kérjük, csak magyar betüket tartalmazó szavakat írjon be!
                  Szóköz csak a szavak között lehet!
                </div>
                <div *ngIf="street.errors?.['required']">
                  Kérjük, töltse ki a mezőt!
                </div>
              </div>
            </div>
          </div>

          <div class="text-right mt-3">
            <button
              [disabled]="customerForm.invalid"
              *ngIf="customer['_id'] != 'new'"
              (click)="onUpdate(customer, customerForm)"
              type="submit"
              class="btn btn-primary"
            >
              Update customer
            </button>
            <button
              [disabled]="customerForm.invalid"
              *ngIf="customer['_id'] == 'new'"
              (click)="onCreate(customer)"
              type="submit"
              class="btn btn-primary"
            >
              Create customer
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="col-md-4"></div>
</div>
